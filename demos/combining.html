<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Composite Selectors &mdash; soupsavvy  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=1bac72b6" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CSS Selectors" href="css.html" />
    <link rel="prev" title="Selectors" href="selectors.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            soupsavvy
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../soupsavvy.selectors.html">selectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../soupsavvy.models.html">models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../soupsavvy.operations.html">operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../soupsavvy.testing.html">testing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Demos</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="use_cases.html">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="selectors.html">Selectors</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Composite Selectors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#combinators">Combinators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#descendantcombinator">DescendantCombinator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-with-operator">Creating with operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#multiple-selectors">Multiple selectors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#combinators-equality">Combinators equality</a></li>
<li class="toctree-l3"><a class="reference internal" href="#not-recursive-search">Not Recursive search</a></li>
<li class="toctree-l3"><a class="reference internal" href="#childcombinator">ChildCombinator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Creating with operator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#combining-combinators">Combining Combinators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#caveats">Caveats</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#nextsiblingcombinator">NextSiblingCombinator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Creating with operator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#reducing-combinators">Reducing combinators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#subsequentsiblingcombinator">SubsequentSiblingCombinator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Creating with operator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#parentcombinator">ParentCombinator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Creating with operator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ancestorcombinator">AncestorCombinator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">Creating with operator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#logical-selectors">Logical Selectors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#andselector">AndSelector</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id11">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">Creating with operator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#selectorlist">SelectorList</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id13">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">Creating with operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#equality">Equality</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-shortcuts">API shortcuts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#notselector">NotSelector</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id15">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">Creating with operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">Multiple selectors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#xorselector">XORSelector</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id18">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id19">Multiple selectors</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#relative-selectors">Relative Selectors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#css-vs-soupsavvy">CSS vs soupsavvy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#relativechild">RelativeChild</a></li>
<li class="toctree-l3"><a class="reference internal" href="#anchor">Anchor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#behavior-of-relative-selectors">Behavior of Relative Selectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#relativenextsibling">RelativeNextSibling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#recursivity">Recursivity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hasselector">HasSelector</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id20">CSS vs soupsavvy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-recursive-search">Default Recursive Search</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">Multiple Selectors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id22">Relative Selectors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compound-selectors">Compound Selectors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mixed-relative-selectors">Mixed Relative Selectors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#relativesubsequentsibling">RelativeSubsequentSibling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#relative-ancestors">Relative Ancestors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#relativeancestor">RelativeAncestor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#relativeparent">RelativeParent</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ancestors-with-hasselector">Ancestors with HasSelector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nth-selectors">Nth Selectors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id23">CSS vs soupsavvy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nthofselector">NthOfSelector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nthlastofselector">NthLastOfSelector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#onlyofselector">OnlyOfSelector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#combining">Combining</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#operators-module">Operators module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="css.html">CSS Selectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">soupsavvy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Composite Selectors</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/demos/combining.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="composite-selectors">
<h1>Composite Selectors<a class="headerlink" href="#composite-selectors" title="Link to this heading"></a></h1>
<p>Combining selectors is one of the most powerful features of <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>. By allowing you to mix and match different selectors, <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> offers a highly flexible and customizable way to refine your search criteria. In this demo, we’ll explore <strong>Higher Order Selectors</strong> and demonstrate how they can be leveraged to perform complex searches effectively.</p>
<p><strong>Higher Order Selectors</strong> enable you to combine multiple selectors into a single, composite selector, enhancing your ability to target specific elements. Whether you’re matching tags, attributes, or text content, these selectors can be used together to create more advanced search logic.</p>
<section id="combinators">
<h2>Combinators<a class="headerlink" href="#combinators" title="Link to this heading"></a></h2>
<p>We’ll begin with <strong>Combinators</strong>, which are inspired by the CSS concept of combinators. These allow you to pass multiple selectors and perform a search on a <code class="docutils literal notranslate"><span class="pre">Tag</span></code> object, mimicking the logic of CSS combinators but with the added power and flexibility of <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>.</p>
<p>For more information on CSS combinators, you can refer to <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Child_combinator">Mozilla</a>.</p>
<p>While <code class="docutils literal notranslate"><span class="pre">BeautifulSoup</span></code> provides methods like <code class="docutils literal notranslate"><span class="pre">select</span></code> and <code class="docutils literal notranslate"><span class="pre">select_one</span></code> to find tags using CSS selectors, these are often limited by the constraints of vanilla CSS. <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> goes beyond these limitations, offering more complex conditions such as regular expressions and other advanced selection logic that can be seamlessly combined using these powerful selectors.</p>
<section id="descendantcombinator">
<h3>DescendantCombinator<a class="headerlink" href="#descendantcombinator" title="Link to this heading"></a></h3>
<p>The <strong>Descendant Combinator</strong> is one of the simplest and most frequently used combinators in CSS. It selects elements that match a second selector only if they have an ancestor that matches the first selector. In CSS, this relationship is represented by a single space <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;</span></code> between two selectors. For example, the following CSS:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">book</span><span class="w"> </span><span class="p">.</span><span class="nc">price</span>
</pre></div>
</div>
<p>matches all tags with the class <code class="docutils literal notranslate"><span class="pre">price</span></code> that are descendants of tags with the class <code class="docutils literal notranslate"><span class="pre">book</span></code>. For more details on CSS combinators, refer to the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Descendant_combinator">Mozilla</a>.</p>
<section id="usage">
<h4>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h4>
<p>In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, this logic is encapsulated in the <code class="docutils literal notranslate"><span class="pre">DescendantCombinator</span></code> class, which functions similarly to its CSS counterpart. The <code class="docutils literal notranslate"><span class="pre">DescendantCombinator</span></code> accepts two or more selectors and returns <code class="docutils literal notranslate"><span class="pre">Tag</span></code> objects that satisfy the descendant relationship between them.</p>
<p>Here’s an example equivalent to the CSS above:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span><span class="p">,</span> <span class="n">DescendantCombinator</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">            &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">            &lt;span class=&quot;price_section&quot;&gt;</span>
<span class="sd">                &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">            &lt;/span&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">book_selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;book&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">DescendantCombinator</span><span class="p">(</span><span class="n">book_selector</span><span class="p">,</span> <span class="n">price_selector</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="creating-with-operator">
<h4>Creating with operator<a class="headerlink" href="#creating-with-operator" title="Link to this heading"></a></h4>
<p>As mentioned in previously, <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> provides alternative way of creating some composite selectors by using operators. More concise way to create <code class="docutils literal notranslate"><span class="pre">DescendantCombinator</span></code> is by using the <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> operator, which acts as syntactic sugar:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DescendantCombinator</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="o">==</span> <span class="n">left</span> <span class="o">&gt;&gt;</span> <span class="n">right</span>
</pre></div>
</div>
<p>Where left selector matches ancestor and right selector matches descendant.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">            &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">            &lt;span class=&quot;price_section&quot;&gt;</span>
<span class="sd">                &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">            &lt;/span&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">book_selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;book&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">book_selector</span> <span class="o">&gt;&gt;</span> <span class="n">price_selector</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="multiple-selectors">
<h4>Multiple selectors<a class="headerlink" href="#multiple-selectors" title="Link to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">DescendantCombinator</span></code> allows you to chain together any number of selectors as positional arguments. When more than two selectors are provided, they are chained them in the order they appear, creating a more complex selection logic. This is similar to chaining selectors in CSS.</p>
<p>For instance, the following CSS:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">#</span><span class="nn">available</span><span class="w"> </span><span class="p">.</span><span class="nc">book</span><span class="w"> </span><span class="p">.</span><span class="nc">price</span>
</pre></div>
</div>
<p>matches all elements with the class <code class="docutils literal notranslate"><span class="pre">price</span></code> that are descendants of a <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> with the class <code class="docutils literal notranslate"><span class="pre">book</span></code>, which in turn is a descendant of a <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> with the ID <code class="docutils literal notranslate"><span class="pre">available</span></code>.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, you can achieve this with <code class="docutils literal notranslate"><span class="pre">DescendantCombinator</span></code> as shown below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">IdSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">            &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">        &lt;div id=&quot;available&quot;&gt;</span>
<span class="sd">            &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">                &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">                &lt;span class=&quot;price_section&quot;&gt;</span>
<span class="sd">                    &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">                &lt;/span&gt;</span>
<span class="sd">            &lt;/div&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">available_selector</span> <span class="o">=</span> <span class="n">IdSelector</span><span class="p">(</span><span class="s2">&quot;available&quot;</span><span class="p">)</span>
<span class="n">book_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;book&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">available_selector</span> <span class="o">&gt;&gt;</span> <span class="n">book_selector</span> <span class="o">&gt;&gt;</span> <span class="n">price_selector</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="combinators-equality">
<h3>Combinators equality<a class="headerlink" href="#combinators-equality" title="Link to this heading"></a></h3>
<p>In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, two combinators are considered equal only if they are of the same type and involve the exact same selectors in the same order. The order of selectors is significant, meaning <code class="docutils literal notranslate"><span class="pre">left</span> <span class="pre">&gt;&gt;</span> <span class="pre">right</span></code> is not equal to <code class="docutils literal notranslate"><span class="pre">right</span> <span class="pre">&gt;&gt;</span> <span class="pre">left</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span><span class="p">,</span> <span class="n">DescendantCombinator</span>

<span class="n">book_selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;book&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;left &gt;&gt; right == DescendantCombinator(left, right):&quot;</span><span class="p">,</span>
    <span class="n">book_selector</span> <span class="o">&gt;&gt;</span> <span class="n">price_selector</span>
    <span class="o">==</span> <span class="n">DescendantCombinator</span><span class="p">(</span><span class="n">book_selector</span><span class="p">,</span> <span class="n">price_selector</span><span class="p">),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;left &gt;&gt; right == right &gt;&gt; left:&quot;</span><span class="p">,</span>
    <span class="n">price_selector</span> <span class="o">&gt;&gt;</span> <span class="n">book_selector</span> <span class="o">==</span> <span class="n">book_selector</span> <span class="o">&gt;&gt;</span> <span class="n">price_selector</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>left &gt;&gt; right == DescendantCombinator(left, right): True
left &gt;&gt; right == right &gt;&gt; left: False
</pre></div>
</div>
</div>
</div>
</section>
<section id="not-recursive-search">
<h3>Not Recursive search<a class="headerlink" href="#not-recursive-search" title="Link to this heading"></a></h3>
<p>Setting <code class="docutils literal notranslate"><span class="pre">recursive</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">False</span></code> will return element only if element matched by first selector is a child of searched element. This logic is in place for all <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> combinators.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;not_child_book&quot;&gt;</span>
<span class="sd">            &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">                &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">                &lt;span class=&quot;price_section&quot;&gt;</span>
<span class="sd">                    &lt;p class=&quot;price&quot;&gt;Price: $50&lt;/p&gt;</span>
<span class="sd">                &lt;/span&gt;</span>
<span class="sd">            &lt;/div&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">            &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">            &lt;span class=&quot;price_section&quot;&gt;</span>
<span class="sd">                &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">            &lt;/span&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">book_selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;book&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">book_selector</span> <span class="o">&gt;&gt;</span> <span class="n">price_selector</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
<p>In this case <code class="docutils literal notranslate"><span class="pre">Price:</span> <span class="pre">$50</span></code> is not selected, as it’s ancestor <code class="docutils literal notranslate"><span class="pre">&lt;div</span> <span class="pre">class=&quot;book&quot;&gt;</span></code> that matched first selector is not a direct parent of searched element.</p>
</section>
<section id="childcombinator">
<h3>ChildCombinator<a class="headerlink" href="#childcombinator" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ChildCombinator</span></code> mirrors the behavior of the CSS child combinator. In CSS, a child combinator (<code class="docutils literal notranslate"><span class="pre">&gt;</span></code> symbol) selects elements that are direct children of a specified parent element. This is a stricter relationship than the descendant combinator, as it only matches elements that are immediate children of a given element, not just any descendant.</p>
<p>For example, in CSS:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">div</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">price</span>
</pre></div>
</div>
<p>This selector matches all elements with the class <code class="docutils literal notranslate"><span class="pre">price</span></code> that are direct children of <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> element. For more details refer to <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Child_combinator">Mozilla</a>.</p>
<section id="id1">
<h4>Usage<a class="headerlink" href="#id1" title="Link to this heading"></a></h4>
<p>In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, this logic is implemented with the <code class="docutils literal notranslate"><span class="pre">ChildCombinator</span></code> class. It accepts two or more selectors as positional arguments and returns elements that match the specified child-parent relationships.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span><span class="p">,</span> <span class="n">ChildCombinator</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;div&gt;</span>
<span class="sd">            &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">            &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">                &lt;h2&gt;Discounted&lt;/h2&gt;</span>
<span class="sd">                &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">            &lt;/span&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">book_selector</span> <span class="o">=</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">ChildCombinator</span><span class="p">(</span><span class="n">book_selector</span><span class="p">,</span> <span class="n">price_selector</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="id2">
<h4>Creating with operator<a class="headerlink" href="#id2" title="Link to this heading"></a></h4>
<p>More concise way to create <code class="docutils literal notranslate"><span class="pre">ChildCombinator</span></code> is by using the <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> operator, which is consistent with CSS syntax:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ChildCombinator</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="o">==</span> <span class="n">left</span> <span class="o">&gt;</span> <span class="n">right</span>
</pre></div>
</div>
<p>Where left selector matches parent and right selector matches child.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;div&gt;</span>
<span class="sd">            &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">            &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">                &lt;h2&gt;Discounted&lt;/h2&gt;</span>
<span class="sd">                &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">            &lt;/span&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">book_selector</span> <span class="o">=</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">book_selector</span> <span class="o">&gt;</span> <span class="n">price_selector</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="combining-combinators">
<h3>Combining Combinators<a class="headerlink" href="#combining-combinators" title="Link to this heading"></a></h3>
<p>Just like any other <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> selector, combinators can be used as inputs to other higher-order selectors. For instance, you can define a combination of parent-child and descendant relationships within a single selector. In CSS, this would be represented as:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">#</span><span class="nn">available</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">div</span><span class="w"> </span><span class="p">.</span><span class="nc">price</span>
</pre></div>
</div>
<p>In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, this logic can be replicated by using both the <code class="docutils literal notranslate"><span class="pre">ChildCombinator</span></code> and the <code class="docutils literal notranslate"><span class="pre">DescendantCombinator</span></code> together. This combination allows you to specify that tag with id <code class="docutils literal notranslate"><span class="pre">available</span></code> should contain a direct child <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code>, which in turn should contain a descendant element with the class <code class="docutils literal notranslate"><span class="pre">price</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">IdSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;div&gt;</span>
<span class="sd">            &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">        &lt;div id=&quot;available&quot;&gt;</span>
<span class="sd">            &lt;div&gt;</span>
<span class="sd">                &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">                &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">                    &lt;h2&gt;Discounted&lt;/h2&gt;</span>
<span class="sd">                    &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">                &lt;/span&gt;</span>
<span class="sd">                &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">            &lt;/div&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">available_selector</span> <span class="o">=</span> <span class="n">IdSelector</span><span class="p">(</span><span class="s2">&quot;available&quot;</span><span class="p">)</span>
<span class="n">book_selector</span> <span class="o">=</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="p">(</span><span class="n">available_selector</span> <span class="o">&gt;</span> <span class="n">book_selector</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">price_selector</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
<section id="caveats">
<h4>Caveats<a class="headerlink" href="#caveats" title="Link to this heading"></a></h4>
<p>When combining selectors with operators in <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, it’s important to understand that some operators have higher precedence than others, which can affect the order in which expressions are evaluated.</p>
<p>For example, the <code class="docutils literal notranslate"><span class="pre">right</span> <span class="pre">shift</span></code> operator (<code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code>) has higher precedence than the <code class="docutils literal notranslate"><span class="pre">greater</span> <span class="pre">than</span></code> operator (<code class="docutils literal notranslate"><span class="pre">&gt;</span></code>). This means that in an expression like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">left</span> <span class="o">&gt;</span> <span class="n">middle</span> <span class="o">&gt;&gt;</span> <span class="n">right</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> operation is performed first, resulting in:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ChildCombinator</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">DescendantCombinator</span><span class="p">(</span><span class="n">middle</span><span class="p">,</span> <span class="n">right</span><span class="p">))</span>
</pre></div>
</div>
<p>In contrast, if you add parentheses to explicitly define the order of operations:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">left</span> <span class="o">&gt;</span> <span class="n">middle</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">right</span>
</pre></div>
</div>
<p>This expression would be interpreted as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DescendantCombinator</span><span class="p">(</span><span class="n">ChildCombinator</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">middle</span><span class="p">),</span> <span class="n">right</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="example">
<h4>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h4>
<p>In provided example, the order of selectors isn’t significant because both the <code class="docutils literal notranslate"><span class="pre">ChildCombinator</span></code> and <code class="docutils literal notranslate"><span class="pre">DescendantCombinator</span></code> are commutative — meaning the order in which you apply them doesn’t affect the final result. However, this may not always be the case, so to avoid ambiguity and ensure expected behavior, it’s always safer to include parentheses when combining operators.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">ChildCombinator</span><span class="p">,</span>
    <span class="n">ClassSelector</span><span class="p">,</span>
    <span class="n">DescendantCombinator</span><span class="p">,</span>
    <span class="n">IdSelector</span><span class="p">,</span>
    <span class="n">TypeSelector</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">available_selector</span> <span class="o">=</span> <span class="n">IdSelector</span><span class="p">(</span><span class="s2">&quot;available&quot;</span><span class="p">)</span>
<span class="n">book_selector</span> <span class="o">=</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="n">DescendantCombinator</span><span class="p">(</span>
        <span class="n">ChildCombinator</span><span class="p">(</span><span class="n">available_selector</span><span class="p">,</span> <span class="n">book_selector</span><span class="p">),</span> <span class="n">price_selector</span>
    <span class="p">)</span>
    <span class="o">==</span> <span class="p">(</span><span class="n">available_selector</span> <span class="o">&gt;</span> <span class="n">book_selector</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">price_selector</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="nextsiblingcombinator">
<h3>NextSiblingCombinator<a class="headerlink" href="#nextsiblingcombinator" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">NextSiblingCombinator</span></code> replicates the behavior of the CSS adjacent sibling combinator. In CSS, the next (aka adjacent) sibling combinator (denoted by the <code class="docutils literal notranslate"><span class="pre">+</span></code> symbol) selects an element that directly follows a specified sibling element.</p>
<p>For example, in CSS:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">div</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">.</span><span class="nc">price</span>
</pre></div>
</div>
<p>This selector matches all elements with the class <code class="docutils literal notranslate"><span class="pre">price</span></code> that are the immediate next siblings of <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> elements. For more details, refer to <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Next-sibling_combinator">Mozilla</a>.</p>
<section id="id3">
<h4>Usage<a class="headerlink" href="#id3" title="Link to this heading"></a></h4>
<p>In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, the <code class="docutils literal notranslate"><span class="pre">NextSiblingCombinator</span></code> class implements this logic. It takes two or more selectors as positional arguments and returns elements that match the specified preceding-adjacent sibling relationships. Example below demonstrate different example by using <code class="docutils literal notranslate"><span class="pre">PatternSelector</span></code> to match text content, element with class <code class="docutils literal notranslate"><span class="pre">price</span></code> that is immediate sibling of element with text content <code class="docutils literal notranslate"><span class="pre">Discounted</span></code> will be selected.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">NextSiblingCombinator</span><span class="p">,</span> <span class="n">PatternSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;h2&gt;Discounted&lt;/h2&gt;</span>
<span class="sd">        &lt;span&gt;Unavailable&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">        &lt;h1&gt;Discounted&lt;/h1&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">PatternSelector</span><span class="p">(</span><span class="s2">&quot;Discounted&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">NextSiblingCombinator</span><span class="p">(</span><span class="n">discount_selector</span><span class="p">,</span> <span class="n">price_selector</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="id4">
<h4>Creating with operator<a class="headerlink" href="#id4" title="Link to this heading"></a></h4>
<p>More concise way to create <code class="docutils literal notranslate"><span class="pre">NextSiblingCombinator</span></code> is by using the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator, which is consistent with CSS syntax:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">NextSiblingCombinator</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="o">==</span> <span class="n">left</span> <span class="o">+</span> <span class="n">right</span>
</pre></div>
</div>
<p>Where left selector matches preceding sibling and right selector matches next sibling.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">PatternSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;h2&gt;Discounted&lt;/h2&gt;</span>
<span class="sd">        &lt;span&gt;Unavailable&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">        &lt;h1&gt;Discounted&lt;/h1&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">PatternSelector</span><span class="p">(</span><span class="s2">&quot;Discounted&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">discount_selector</span> <span class="o">+</span> <span class="n">price_selector</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
<p>In case of having multiple selectors, they are chained in the order they appear, first selector matches element and each subsequent selector matches next sibling of previously matched element.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">PatternSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;h2&gt;Discounted&lt;/h2&gt;</span>
<span class="sd">        &lt;span&gt;Breaking relationship :(&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Animal Farm 1&lt;/span&gt;</span>

<span class="sd">        &lt;h2&gt;Discounted&lt;/h2&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;span&gt;Breaking relationship :(&lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Animal Farm 2&lt;/span&gt;</span>

<span class="sd">        &lt;h2&gt;Discounted&lt;/h2&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Animal Farm 3&lt;/span&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">PatternSelector</span><span class="p">(</span><span class="s2">&quot;Discounted&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">title_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">discount_selector</span> <span class="o">+</span> <span class="n">price_selector</span> <span class="o">+</span> <span class="n">title_selector</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;span class=&quot;title&quot;&gt;Animal Farm 3&lt;/span&gt;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="reducing-combinators">
<h3>Reducing combinators<a class="headerlink" href="#reducing-combinators" title="Link to this heading"></a></h3>
<p>When using multiple selectors for Higher Order Selector, they can be <em>reduced</em> into one by chaining them with operator, <code class="docutils literal notranslate"><span class="pre">functools.reduce</span></code> can be used for this purpose in a convenient way.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>
<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">add</span>

<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       &lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;</span>
<span class="sd">       &lt;span class=&quot;c2&quot;&gt;&lt;/span&gt;</span>
<span class="sd">       &lt;span class=&quot;c3&quot;&gt;&lt;/span&gt;</span>
<span class="sd">       &lt;span class=&quot;c4&quot;&gt;&lt;/span&gt;</span>
<span class="sd">       &lt;span class=&quot;c5&quot;&gt;&lt;/span&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">(</span><span class="n">ClassSelector</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;c</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)))</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;span class=&quot;c5&quot;&gt;&lt;/span&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="subsequentsiblingcombinator">
<h3>SubsequentSiblingCombinator<a class="headerlink" href="#subsequentsiblingcombinator" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">SubsequentSiblingCombinator</span></code> emulates the behavior of the CSS subsequent sibling combinator. In CSS, the subsequent sibling combinator (denoted by the <code class="docutils literal notranslate"><span class="pre">~</span></code> symbol) selects elements that follow the element matched by the first selector and share the same parent.</p>
<p>For example, in CSS:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">div</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="p">.</span><span class="nc">price</span>
</pre></div>
</div>
<p>This selector matches all elements with class <code class="docutils literal notranslate"><span class="pre">price</span></code> that are siblings of <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> and appear after it in document. For more details, refer to <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Subsequent-sibling_combinator">Mozilla</a>.</p>
<section id="id5">
<h4>Usage<a class="headerlink" href="#id5" title="Link to this heading"></a></h4>
<p>In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, the <code class="docutils literal notranslate"><span class="pre">SubsequentSiblingCombinator</span></code> class provides similar functionality. It accepts two or more selectors as positional arguments and returns elements that match the specified preceding-subsequent sibling relationships. For more information on search logic when multiple selectors are provided, refer to the <code class="docutils literal notranslate"><span class="pre">NextSiblingCombinator</span></code> section.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">SubsequentSiblingCombinator</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $25&lt;/p&gt;</span>
<span class="sd">        &lt;h2&gt;Discounted&lt;/h2&gt;</span>
<span class="sd">        &lt;span&gt;Bargain!!!&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;h2&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">SubsequentSiblingCombinator</span><span class="p">(</span><span class="n">discount_selector</span><span class="p">,</span> <span class="n">price_selector</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;, &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="id6">
<h4>Creating with operator<a class="headerlink" href="#id6" title="Link to this heading"></a></h4>
<p>More concise way to create <code class="docutils literal notranslate"><span class="pre">SubsequentSiblingCombinator</span></code> is by using the <code class="docutils literal notranslate"><span class="pre">*</span></code> operator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SubsequentSiblingCombinator</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="o">==</span> <span class="n">left</span> <span class="o">*</span> <span class="n">right</span>
</pre></div>
</div>
<p>Where left selector matches preceding sibling and right selector matches subsequent sibling.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $25&lt;/p&gt;</span>
<span class="sd">        &lt;h2&gt;Discounted&lt;/h2&gt;</span>
<span class="sd">        &lt;span&gt;Bargain!!!&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;h2&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">discount_selector</span> <span class="o">*</span> <span class="n">price_selector</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="parentcombinator">
<h3>ParentCombinator<a class="headerlink" href="#parentcombinator" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ParentCombinator</span></code> separates two selectors and matches all instances of the second matched element that is parent of the first matched element.</p>
<p>Although this combinator does not have its counterpart in CSS, it can be represented as:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">div</span><span class="p">:</span><span class="nd">has</span><span class="o">(&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">menu</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="o">)</span>
</pre></div>
</div>
<p>The given selector would match all <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> elements that have a child with class <code class="docutils literal notranslate"><span class="pre">menu</span></code> that in turn has a child <code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code> element.</p>
<section id="id7">
<h4>Usage<a class="headerlink" href="#id7" title="Link to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">ParentCombinator</span></code> accepts two or more selectors as positional arguments and returns elements that match the specified child-parent relationships. This example demonstrates how to use <code class="docutils literal notranslate"><span class="pre">ParentCombinator</span></code> to match all elements with class <code class="docutils literal notranslate"><span class="pre">discount</span></code> that are parents of elements of type <code class="docutils literal notranslate"><span class="pre">p</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span><span class="p">,</span> <span class="n">ParentCombinator</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;book&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $25&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;&lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;div&gt;</span>
<span class="sd">                &lt;p class=&quot;price&quot;&gt;Price: $35&lt;/p&gt;</span>
<span class="sd">            &lt;/div&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">ParentCombinator</span><span class="p">(</span>
    <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">),</span>
    <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;discount&quot;</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">prettify</span><span class="p">())</span>  <span class="c1"># type: ignore</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;span class=&quot;discount&quot;&gt;
 &lt;p class=&quot;price&quot;&gt;
  Price: $10
 &lt;/p&gt;
&lt;/span&gt;
</pre></div>
</div>
</div>
</div>
<p>It is equivalent to using <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code> with child combinator and narrowing down results with selector matching parent element, which is more verbose and less readable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">Anchor</span><span class="p">,</span> <span class="n">AttributeSelector</span><span class="p">,</span> <span class="n">HasSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;book&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $35&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;&lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $25&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">HasSelector</span><span class="p">(</span><span class="n">Anchor</span> <span class="o">&gt;</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">))</span> <span class="o">&amp;</span> <span class="n">AttributeSelector</span><span class="p">(</span>
    <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;discount&quot;</span>
<span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">prettify</span><span class="p">())</span>  <span class="c1"># type: ignore</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;span class=&quot;discount&quot;&gt;
 &lt;p class=&quot;price&quot;&gt;
  Price: $25
 &lt;/p&gt;
&lt;/span&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="id8">
<h4>Creating with operator<a class="headerlink" href="#id8" title="Link to this heading"></a></h4>
<p>More concise way to create <code class="docutils literal notranslate"><span class="pre">ParentCombinator</span></code> is by using the <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> operator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ParentCombinator</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="o">==</span> <span class="n">left</span> <span class="o">&lt;</span> <span class="n">right</span>
</pre></div>
</div>
<p>Where left selector matches child and right selector matches parent.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;book&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $25&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;&lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;div&gt;</span>
<span class="sd">                &lt;p class=&quot;price&quot;&gt;Price: $35&lt;/p&gt;</span>
<span class="sd">            &lt;/div&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">prettify</span><span class="p">())</span>  <span class="c1"># type: ignore</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;span class=&quot;discount&quot;&gt;
 &lt;p class=&quot;price&quot;&gt;
  Price: $10
 &lt;/p&gt;
&lt;/span&gt;
</pre></div>
</div>
</div>
</div>
<p>In case of having multiple selectors, they are chained in the order they appear, first selector matches element and each subsequent selector matches parent of previously matched element. <strong>Remember about the parentheses!</strong> to ensure the order of operations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;div class=&quot;book&quot;&gt;&lt;/div&gt;</span>
<span class="sd">        &lt;div&gt;&lt;span class=&quot;discount&quot;&gt;&lt;/span&gt;&lt;/div&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;div&gt;</span>
<span class="sd">                &lt;p class=&quot;price&quot;&gt;Price: $35&lt;/p&gt;</span>
<span class="sd">            &lt;/div&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;div&gt;</span>
<span class="sd">            &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">                &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">            &lt;/span&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="p">(</span><span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">prettify</span><span class="p">())</span>  <span class="c1"># type: ignore</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;div&gt;
 &lt;span class=&quot;discount&quot;&gt;
  &lt;p class=&quot;price&quot;&gt;
   Price: $10
  &lt;/p&gt;
 &lt;/span&gt;
&lt;/div&gt;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="ancestorcombinator">
<h3>AncestorCombinator<a class="headerlink" href="#ancestorcombinator" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">AncestorCombinator</span></code> separates two selectors and matches all instances of the second matched element that is ancestor of the first matched element.</p>
<p>Although this combinator does not have its counterpart in CSS, it can be represented as:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">div</span><span class="p">:</span><span class="nd">has</span><span class="o">(</span><span class="p">.</span><span class="nc">menu</span><span class="w"> </span><span class="nt">a</span><span class="o">)</span>
</pre></div>
</div>
<p>The given selector would match all <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> elements that have a descendant with class <code class="docutils literal notranslate"><span class="pre">menu</span></code> that in turn has a descendant <code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code> element.</p>
<section id="id9">
<h4>Usage<a class="headerlink" href="#id9" title="Link to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">AncestorCombinator</span></code> accepts two or more selectors as positional arguments and returns elements that match the specified descendant-ancestor relationships. This example demonstrates how to use <code class="docutils literal notranslate"><span class="pre">AncestorCombinator</span></code> to match all elements with class <code class="docutils literal notranslate"><span class="pre">discount</span></code> that are ancestors of elements of type <code class="docutils literal notranslate"><span class="pre">p</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AncestorCombinator</span><span class="p">,</span> <span class="n">AttributeSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;book&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $25&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;&lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;div&gt;&lt;p class=&quot;price&quot;&gt;Price: $35&lt;/p&gt;&lt;/div&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">AncestorCombinator</span><span class="p">(</span>
    <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">),</span>
    <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;discount&quot;</span><span class="p">),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;span class=&quot;discount&quot;&gt;
 &lt;div&gt;
  &lt;p class=&quot;price&quot;&gt;
   Price: $35
  &lt;/p&gt;
 &lt;/div&gt;
&lt;/span&gt;

&lt;span class=&quot;discount&quot;&gt;
 &lt;p class=&quot;price&quot;&gt;
  Price: $10
 &lt;/p&gt;
&lt;/span&gt;
</pre></div>
</div>
</div>
</div>
<p>It is equivalent to using <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code> with (implied) descendant combinator and narrowing down results with selector matching ancestor element, which is more verbose and less readable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span><span class="p">,</span> <span class="n">HasSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;book&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $25&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;&lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;div&gt;&lt;p class=&quot;price&quot;&gt;Price: $35&lt;/p&gt;&lt;/div&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">HasSelector</span><span class="p">(</span><span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">))</span> <span class="o">&amp;</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;span class=&quot;discount&quot;&gt;
 &lt;div&gt;
  &lt;p class=&quot;price&quot;&gt;
   Price: $35
  &lt;/p&gt;
 &lt;/div&gt;
&lt;/span&gt;

&lt;span class=&quot;discount&quot;&gt;
 &lt;p class=&quot;price&quot;&gt;
  Price: $10
 &lt;/p&gt;
&lt;/span&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="id10">
<h4>Creating with operator<a class="headerlink" href="#id10" title="Link to this heading"></a></h4>
<p>More concise way to create <code class="docutils literal notranslate"><span class="pre">AncestorCombinator</span></code> is by using the <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> operator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AncestorCombinator</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="o">==</span> <span class="n">left</span> <span class="o">&lt;&lt;</span> <span class="n">right</span>
</pre></div>
</div>
<p>Where left selector matches descendant and right selector matches ancestor.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;book&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $25&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;&lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;div&gt;&lt;p class=&quot;price&quot;&gt;Price: $35&lt;/p&gt;&lt;/div&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;span class=&quot;discount&quot;&gt;
 &lt;div&gt;
  &lt;p class=&quot;price&quot;&gt;
   Price: $35
  &lt;/p&gt;
 &lt;/div&gt;
&lt;/span&gt;

&lt;span class=&quot;discount&quot;&gt;
 &lt;p class=&quot;price&quot;&gt;
  Price: $10
 &lt;/p&gt;
&lt;/span&gt;
</pre></div>
</div>
</div>
</div>
<p>In case of having multiple selectors, they are chained in the order they appear, first selector matches element and each subsequent selector matches ancestor of previously matched element. <code class="docutils literal notranslate"><span class="pre">ParentCombinator</span></code> and <code class="docutils literal notranslate"><span class="pre">AncestorCombinator</span></code> can be combined to perform <em>up the tree</em> search. In example below, all elements with of type <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> that have descendant with class <code class="docutils literal notranslate"><span class="pre">menu</span></code> (does not have to be a child) that in turn has child <code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code> element will be selected.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;div class=&quot;book&quot;&gt;&lt;/div&gt;</span>
<span class="sd">        &lt;div&gt;&lt;span class=&quot;discount&quot;&gt;&lt;/span&gt;&lt;/div&gt;</span>
<span class="sd">        &lt;div&gt;</span>
<span class="sd">            &lt;span class=&quot;book&quot;&gt;</span>
<span class="sd">                &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">                    &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">                &lt;/span&gt;</span>
<span class="sd">            &lt;/span&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">        &lt;div&gt;</span>
<span class="sd">            &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">                &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">            &lt;/span&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="p">(</span><span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">))</span> <span class="o">&lt;&lt;</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;div&gt;
 &lt;span class=&quot;book&quot;&gt;
  &lt;span class=&quot;discount&quot;&gt;
   &lt;p class=&quot;price&quot;&gt;
    Price: $30
   &lt;/p&gt;
  &lt;/span&gt;
 &lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
 &lt;span class=&quot;discount&quot;&gt;
  &lt;p class=&quot;price&quot;&gt;
   Price: $10
  &lt;/p&gt;
 &lt;/span&gt;
&lt;/div&gt;
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="logical-selectors">
<h2>Logical Selectors<a class="headerlink" href="#logical-selectors" title="Link to this heading"></a></h2>
<p>Another category of Higher Order Selectors in <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> is <strong>Logical Selectors</strong>. These selectors enables you to create new selectors by combining multiple selectors using logical operators like <code class="docutils literal notranslate"><span class="pre">AND</span></code>, <code class="docutils literal notranslate"><span class="pre">OR</span></code>, <code class="docutils literal notranslate"><span class="pre">NOT</span></code> and <code class="docutils literal notranslate"><span class="pre">XOR</span></code>.</p>
<section id="andselector">
<h3>AndSelector<a class="headerlink" href="#andselector" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">AndSelector</span></code> is the <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> equivalent of the CSS compound selector. In CSS, a compound selector is a sequence of simple selectors that are not separated by a combinator. An element matches a compound selector if it satisfies all the simple selectors in the sequence. For example, the following CSS compound selector:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">p</span><span class="p">.</span><span class="nc">price</span>
</pre></div>
</div>
<p>matches all <code class="docutils literal notranslate"><span class="pre">&lt;p&gt;</span></code> elements with the class <code class="docutils literal notranslate"><span class="pre">price</span></code>. For more information about this selector refer to <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_selectors/Selector_structure#compound_selector">Mozilla</a>.</p>
<section id="id11">
<h4>Usage<a class="headerlink" href="#id11" title="Link to this heading"></a></h4>
<p>In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, the <code class="docutils literal notranslate"><span class="pre">AndSelector</span></code> class achieves similar functionality. It accepts two or more selectors as positional arguments and returns elements that match <strong>all</strong> the specified selectors. This allows for highly specific and precise element selection.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AndSelector</span><span class="p">,</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;title&quot;&gt;Animal Farm&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">p_selector</span> <span class="o">=</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">AndSelector</span><span class="p">(</span><span class="n">p_selector</span><span class="p">,</span> <span class="n">price_selector</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="id12">
<h4>Creating with operator<a class="headerlink" href="#id12" title="Link to this heading"></a></h4>
<p>More concise way to create <code class="docutils literal notranslate"><span class="pre">AndSelector</span></code> is by using the <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> operator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AndSelector</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="o">==</span> <span class="n">left</span> <span class="o">&amp;</span> <span class="n">right</span>
</pre></div>
</div>
<p>Where both left and right selectors must match for element to be selected.</p>
<p>It accepts two or more selectors as positional arguments and returns elements that match <strong>all</strong> of them.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span><span class="p">,</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">PatternSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;title&quot;&gt;Animal Farm&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot; href=&quot;/shop&quot;&gt;Price: €12&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;price&quot; href=&quot;/shop&quot;&gt;Price: $18&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot; href=&quot;/shop&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)</span>
    <span class="o">&amp;</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
    <span class="o">&amp;</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;/shop&quot;</span><span class="p">)</span>
    <span class="o">&amp;</span> <span class="n">PatternSelector</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\$\d+&quot;</span><span class="p">))</span>
<span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot; href=&quot;/shop&quot;&gt;Price: $15&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="selectorlist">
<h3>SelectorList<a class="headerlink" href="#selectorlist" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">SelectorList</span></code> is <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>’s counterpart of the CSS selector list. In CSS, a selector list is a comma-separated collection of selectors, and an element matches the list if it satisfies any of the individual selectors. For example, consider the following CSS selector list:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">h1</span><span class="o">,</span><span class="w"> </span><span class="nt">h2</span>
</pre></div>
</div>
<p>This selector list matches all <code class="docutils literal notranslate"><span class="pre">&lt;h1&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;h2&gt;</span></code> elements. For more information selector list refer to <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Selector_list">Mozilla</a>.</p>
<section id="id13">
<h4>Usage<a class="headerlink" href="#id13" title="Link to this heading"></a></h4>
<p>In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code> (also known as <code class="docutils literal notranslate"><span class="pre">OrSelector</span></code>, which is an alias) offers similar functionality. It accepts two or more selectors as positional arguments and returns elements that match <strong>any</strong> of the specified selectors.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">OrSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;title&quot;&gt;Animal Farm&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $25&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;title&quot;&gt;Brave New World&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">title_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">discount_price_selector</span> <span class="o">=</span> <span class="n">title_selector</span> <span class="o">+</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">price_selector</span>
<span class="n">standard_price_selector</span> <span class="o">=</span> <span class="n">title_selector</span> <span class="o">+</span> <span class="n">price_selector</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">OrSelector</span><span class="p">(</span><span class="n">discount_price_selector</span><span class="p">,</span> <span class="n">standard_price_selector</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;p class=&quot;price&quot;&gt;Price: $25&lt;/p&gt;, &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="id14">
<h4>Creating with operator<a class="headerlink" href="#id14" title="Link to this heading"></a></h4>
<p>More concise way to create <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code> is by using the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SelectorList</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="o">==</span> <span class="n">left</span> <span class="o">|</span> <span class="n">right</span>
</pre></div>
</div>
<p>Where any of left or right selector must match for element to be selected.</p>
<p>It accepts two or more selectors as positional arguments and returns elements that match <strong>any</strong> of them.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;title&quot;&gt;Animal Farm&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $25&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;title&quot;&gt;Brave New World&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">title_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">discount_price_selector</span> <span class="o">=</span> <span class="n">title_selector</span> <span class="o">+</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">price_selector</span>
<span class="n">standard_price_selector</span> <span class="o">=</span> <span class="n">title_selector</span> <span class="o">+</span> <span class="n">price_selector</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">discount_price_selector</span> <span class="o">|</span> <span class="n">standard_price_selector</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;p class=&quot;price&quot;&gt;Price: $25&lt;/p&gt;, &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="equality">
<h4>Equality<a class="headerlink" href="#equality" title="Link to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code> in <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> is unique in that it functions both as a combinator (due to its CSS-like use case) and as a logical selector (because of its general logic). Unlike other combinators, the order of selectors within a <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code> is not significant, changing the order will not affect the results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">SelectorList</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="n">SelectorList</span><span class="p">(</span><span class="n">discount_selector</span><span class="p">,</span> <span class="n">price_selector</span><span class="p">)</span>
    <span class="o">==</span> <span class="n">SelectorList</span><span class="p">(</span><span class="n">price_selector</span><span class="p">,</span> <span class="n">discount_selector</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>Additionally, two <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code> instances can be considered equal even if they contain a different number of selectors, as long as they match the same elements.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span><span class="p">,</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">SelectorList</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">another_price_selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="n">SelectorList</span><span class="p">(</span><span class="n">discount_selector</span><span class="p">,</span> <span class="n">price_selector</span><span class="p">)</span>
    <span class="o">==</span> <span class="n">SelectorList</span><span class="p">(</span><span class="n">discount_selector</span><span class="p">,</span> <span class="n">price_selector</span><span class="p">,</span> <span class="n">another_price_selector</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="api-shortcuts">
<h4>API shortcuts<a class="headerlink" href="#api-shortcuts" title="Link to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">SelectorList</span></code> can also be created using <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> API shortcut functions. These functions—<code class="docutils literal notranslate"><span class="pre">is_</span></code>, <code class="docutils literal notranslate"><span class="pre">or_</span></code>, and <code class="docutils literal notranslate"><span class="pre">where_</span></code>—provide alternative ways to instantiate a <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code>. All these functions are equivalent and can be used interchangeably, depending on the context or the developer’s preference.</p>
<p>For example, in CSS:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="nd">is</span><span class="o">(</span><span class="nt">h1</span><span class="o">,</span><span class="w"> </span><span class="nt">h2</span><span class="o">)</span>
<span class="p">:</span><span class="nd">where</span><span class="o">(</span><span class="nt">h1</span><span class="o">,</span><span class="w"> </span><span class="nt">h2</span><span class="o">)</span>
</pre></div>
</div>
<p>Both <code class="docutils literal notranslate"><span class="pre">:is</span></code> and <code class="docutils literal notranslate"><span class="pre">:where</span></code> match all <code class="docutils literal notranslate"><span class="pre">&lt;h1&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;h2&gt;</span></code> elements. In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, the <code class="docutils literal notranslate"><span class="pre">is_</span></code> and <code class="docutils literal notranslate"><span class="pre">where_</span></code> functions mimic these pseudo-classes. While they differ in terms of specificity in CSS, here, they are interchangeable. <code class="docutils literal notranslate"><span class="pre">or_</span></code> function serves as a more intuitive alias, especially when using <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code> in a logical selector context.</p>
<p>For more information about these CSS pseudo-classes, refer to <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:is">:is()</a> and <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:where">:where()</a>.</p>
</section>
</section>
<section id="notselector">
<h3>NotSelector<a class="headerlink" href="#notselector" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">NotSelector</span></code> in <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> corresponds to the CSS <code class="docutils literal notranslate"><span class="pre">:not()</span></code> pseudo-class. In CSS, <code class="docutils literal notranslate"><span class="pre">:not()</span></code> is used to exclude elements that match a certain selector. It allows you to apply styles to elements that do not match the specified criteria. For example:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="nd">not</span><span class="o">(</span><span class="p">.</span><span class="nc">discount</span><span class="o">)</span>
</pre></div>
</div>
<p>This selector matches all  elements except those that have the class <code class="docutils literal notranslate"><span class="pre">discount</span></code>. For further details, refer to <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:not">Mozilla</a>.</p>
<section id="id15">
<h4>Usage<a class="headerlink" href="#id15" title="Link to this heading"></a></h4>
<p>In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, <code class="docutils literal notranslate"><span class="pre">NotSelector</span></code> provides similar functionality. It accepts one or more selectors as arguments and returns elements that do <strong>not</strong> match <strong>any</strong> of the specified selectors.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">NotSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price discount&quot;&gt;Price: €10&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: €15&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">NotSelector</span><span class="p">(</span><span class="n">discount_selector</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="id16">
<h4>Creating with operator<a class="headerlink" href="#id16" title="Link to this heading"></a></h4>
<p>More concise way to create <code class="docutils literal notranslate"><span class="pre">NotSelector</span></code> is by using the <code class="docutils literal notranslate"><span class="pre">~</span></code> operator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">NotSelector</span><span class="p">(</span><span class="n">left</span><span class="p">)</span> <span class="o">==</span> <span class="o">~</span><span class="n">selector</span>
</pre></div>
</div>
<p>In this case, the element must not match the given selector to be selected.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price discount&quot;&gt;Price: €10&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: €15&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="o">~</span><span class="n">discount_selector</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="id17">
<h4>Multiple selectors<a class="headerlink" href="#id17" title="Link to this heading"></a></h4>
<p>It accepts two or more selectors as positional arguments and returns elements that do <strong>not</strong> match <strong>any</strong> of them.  Since the <code class="docutils literal notranslate"><span class="pre">~</span></code> operator accepts only one operand, you can use <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code> to negate multiple selectors:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">NotSelector</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="o">==</span> <span class="o">~</span><span class="p">(</span><span class="n">left</span> <span class="o">|</span> <span class="n">right</span><span class="p">)</span>
</pre></div>
</div>
<p>This is equivalent to the logical expression:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">([</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">]):</span>
    <span class="o">...</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">NotSelector</span><span class="p">,</span> <span class="n">PatternSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price discount&quot;&gt;Price: €10&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: €15&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="n">dollars_selector</span> <span class="o">=</span> <span class="n">PatternSelector</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\$\d+&quot;</span><span class="p">))</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">NotSelector</span><span class="p">(</span><span class="n">discount_selector</span><span class="p">,</span> <span class="n">dollars_selector</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: €15&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
<p>Alternative way of defining <code class="docutils literal notranslate"><span class="pre">NotSelector</span></code> with multiple selectors is by using <code class="docutils literal notranslate"><span class="pre">~</span></code> operator on <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">PatternSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;price discount&quot;&gt;Price: €10&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: €15&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="n">dollars_selector</span> <span class="o">=</span> <span class="n">PatternSelector</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\$\d+&quot;</span><span class="p">))</span>
<span class="n">selector</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="n">discount_selector</span> <span class="o">|</span> <span class="n">dollars_selector</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: €15&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="xorselector">
<h3>XORSelector<a class="headerlink" href="#xorselector" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">XORSelector</span></code> is <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>’s counterpart of the logical XOR operation, where an element is selected only if it matches exactly one of the provided selectors, but not more than one.</p>
<p>In CSS, there’s no direct equivalent to <code class="docutils literal notranslate"><span class="pre">XORSelector</span></code>, but this can be achieved through selector list with compound selectors and <code class="docutils literal notranslate"><span class="pre">:not()</span></code> pseudo-class. For example this CSS:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">span</span><span class="p">:</span><span class="nd">not</span><span class="o">(</span><span class="p">.</span><span class="nc">discount</span><span class="o">),</span><span class="w"> </span><span class="p">.</span><span class="nc">discount</span><span class="p">:</span><span class="nd">not</span><span class="o">(</span><span class="nt">span</span><span class="o">)</span>
</pre></div>
</div>
<p>Matches all <code class="docutils literal notranslate"><span class="pre">&lt;span&gt;</span></code> elements that do not have the class <code class="docutils literal notranslate"><span class="pre">discount</span></code> and all elements with the class <code class="docutils literal notranslate"><span class="pre">discount</span></code> that are not <code class="docutils literal notranslate"><span class="pre">&lt;span&gt;</span></code> elements.</p>
<section id="id18">
<h4>Usage<a class="headerlink" href="#id18" title="Link to this heading"></a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">TypeSelector</span><span class="p">,</span> <span class="n">XORSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;Buy!&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;price&quot;&gt;Price: $20&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;discount&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="n">span_selector</span> <span class="o">=</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">XORSelector</span><span class="p">(</span><span class="n">discount_selector</span><span class="p">,</span> <span class="n">span_selector</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;span class=&quot;price&quot;&gt;Price: $20&lt;/span&gt;, &lt;p class=&quot;discount&quot;&gt;Price: $30&lt;/p&gt;]
</pre></div>
</div>
</div>
</div>
<p>This logic could be achieved by combining <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code> and <code class="docutils literal notranslate"><span class="pre">NotSelector</span></code> in <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="n">span_selector</span> <span class="o">=</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">)</span>

<span class="n">xor</span> <span class="o">=</span> <span class="p">(</span><span class="n">discount_selector</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">span_selector</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="o">~</span><span class="n">discount_selector</span> <span class="o">&amp;</span> <span class="n">span_selector</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="id19">
<h4>Multiple selectors<a class="headerlink" href="#id19" title="Link to this heading"></a></h4>
<p>However, it is not scalable in case of having multiple selectors. <code class="docutils literal notranslate"><span class="pre">XORSelector</span></code> provides a more concise and readable way to express this logic. It accept two or more selectors as positional arguments and returns elements that match <strong>exactly one</strong> of the provided selectors.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">PatternSelector</span><span class="p">,</span> <span class="n">TypeSelector</span><span class="p">,</span> <span class="n">XORSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;Buy!&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">        &lt;span class=&quot;price&quot;&gt;Price: $20&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;discount&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;discount&quot;&gt;Only Today: $8&lt;/p&gt;</span>
<span class="sd">        &lt;span&gt;Only Today: $7&lt;/span&gt;</span>
<span class="sd">        &lt;p&gt;Only Today: $6&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="n">span_selector</span> <span class="o">=</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">)</span>
<span class="n">only_today_selector</span> <span class="o">=</span> <span class="n">PatternSelector</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;Only Today:&quot;</span><span class="p">))</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">XORSelector</span><span class="p">(</span><span class="n">discount_selector</span><span class="p">,</span> <span class="n">span_selector</span><span class="p">,</span> <span class="n">only_today_selector</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;span class=&quot;price&quot;&gt;Price: $20&lt;/span&gt;,
 &lt;p class=&quot;discount&quot;&gt;Price: $30&lt;/p&gt;,
 &lt;p&gt;Only Today: $6&lt;/p&gt;]
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="relative-selectors">
<h2>Relative Selectors<a class="headerlink" href="#relative-selectors" title="Link to this heading"></a></h2>
<p>The next category of Higher Order Selectors in <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> is <strong>Relative Selectors</strong>. As outlined by <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_selectors/Selector_structure#relative_selector">Mozilla</a>, in CSS, a relative selector represents an element in relation to one or more anchor elements, typically introduced by a combinator. If a relative selector doesn’t start with an explicit combinator, it is interpreted as having an implied descendant combinator.</p>
<section id="css-vs-soupsavvy">
<h3>CSS vs soupsavvy<a class="headerlink" href="#css-vs-soupsavvy" title="Link to this heading"></a></h3>
<p>In CSS, relative selectors are generally used within specific contexts, such as the <code class="docutils literal notranslate"><span class="pre">:has()</span></code> pseudo-class. For example, consider this CSS:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="nd">has</span><span class="o">(&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">price</span><span class="o">)</span>
</pre></div>
</div>
<p>This selector matches any element that has a direct child with the class <code class="docutils literal notranslate"><span class="pre">price</span></code>. Here, the <code class="docutils literal notranslate"><span class="pre">anchor</span> <span class="pre">element</span></code> is the one being matched by the <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">.price</span></code> relative selector. However, CSS restricts the use of relative selectors in a selector list, allowing them only in specific contexts.</p>
<p>In contrast, <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> provides greater flexibility with relative selectors. These selectors can be used in any context, allowing you to search for elements relative to an <code class="docutils literal notranslate"><span class="pre">anchor</span> <span class="pre">element</span></code> passed directly to the <code class="docutils literal notranslate"><span class="pre">find</span></code> methods of these selectors.</p>
</section>
<section id="relativechild">
<h3>RelativeChild<a class="headerlink" href="#relativechild" title="Link to this heading"></a></h3>
<p>Consider an example where the <code class="docutils literal notranslate"><span class="pre">RelativeChild</span></code> selector is used to find all elements with the class <code class="docutils literal notranslate"><span class="pre">price</span></code> that are direct children of the <code class="docutils literal notranslate"><span class="pre">body</span></code> element.</p>
<p>In this case:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">anchor</span> <span class="pre">element</span></code> is the <code class="docutils literal notranslate"><span class="pre">body</span></code> element.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">relative</span> <span class="pre">element</span></code> is any element with the class <code class="docutils literal notranslate"><span class="pre">price</span></code> that is a direct child of the <code class="docutils literal notranslate"><span class="pre">body</span></code> element.</p></li>
</ul>
<p>In CSS, this would correspond to the selector <code class="docutils literal notranslate"><span class="pre">body</span> <span class="pre">&gt;</span> <span class="pre">.price</span></code>, where <code class="docutils literal notranslate"><span class="pre">body</span></code> serves as the dynamically defined <code class="docutils literal notranslate"><span class="pre">anchor</span> <span class="pre">element</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span>
<span class="kn">from</span> <span class="nn">soupsavvy.selectors.relative</span> <span class="kn">import</span> <span class="n">RelativeChild</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;title&quot;&gt;Animal Farm&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;discount&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">relative</span> <span class="o">=</span> <span class="n">RelativeChild</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
<span class="n">relative</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="anchor">
<h3>Anchor<a class="headerlink" href="#anchor" title="Link to this heading"></a></h3>
<p>You can create relative selectors in <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> using the <code class="docutils literal notranslate"><span class="pre">Anchor</span></code> class, which allows you to chain selectors using specific operators:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> creates <code class="docutils literal notranslate"><span class="pre">RelativeDescendant</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> creates <code class="docutils literal notranslate"><span class="pre">RelativeAncestor</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&gt;</span></code> creates <code class="docutils literal notranslate"><span class="pre">RelativeChild</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code> creates <code class="docutils literal notranslate"><span class="pre">RelativeParent</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">+</span></code> creates <code class="docutils literal notranslate"><span class="pre">RelativeNextSibling</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*</span></code> creates <code class="docutils literal notranslate"><span class="pre">RelativeSubsequentSibling</span></code></p></li>
</ul>
<p>These operators function similarly to how they are used with combinators, allowing you to define relationships between elements relative to a given anchor.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">Anchor</span><span class="p">,</span> <span class="n">AttributeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;title&quot;&gt;Animal Farm&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;discount&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">relative</span> <span class="o">=</span> <span class="n">Anchor</span> <span class="o">&gt;</span> <span class="n">selector</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">relative</span><span class="p">))</span>
<span class="n">relative</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;soupsavvy.selectors.relative.RelativeChild&#39;&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="behavior-of-relative-selectors">
<h3>Behavior of Relative Selectors<a class="headerlink" href="#behavior-of-relative-selectors" title="Link to this heading"></a></h3>
<p>Relative selectors in <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> have unique behaviors that distinguish them from other selectors:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">RelativeChild</span></code></strong>: Always returns direct children of the searched element, regardless of the <code class="docutils literal notranslate"><span class="pre">recursive</span></code> parameter.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">RelativeDescendant</span></code></strong>: Always returns descendants of the searched element, even if <code class="docutils literal notranslate"><span class="pre">recursive</span></code> is set to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">RelativeNextSibling</span></code></strong> and <strong><code class="docutils literal notranslate"><span class="pre">RelativeSubsequentSibling</span></code></strong>: Always search for siblings of the searched element.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span>
<span class="kn">from</span> <span class="nn">soupsavvy.selectors.relative</span> <span class="kn">import</span> <span class="n">RelativeChild</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;title&quot;&gt;Animal Farm&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;discount&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;div&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $40&lt;/p&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">relative</span> <span class="o">=</span> <span class="n">RelativeChild</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">relative</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">relative</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;]
[&lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="relativenextsibling">
<h3>RelativeNextSibling<a class="headerlink" href="#relativenextsibling" title="Link to this heading"></a></h3>
<p>Let’s say you want to find elements that are immediate siblings of the <code class="docutils literal notranslate"><span class="pre">div</span></code> (searched element) and have the class <code class="docutils literal notranslate"><span class="pre">price</span></code>. You would use <code class="docutils literal notranslate"><span class="pre">RelativeNextSibling</span></code>:</p>
<p>This will return elements that are the immediate next sibling of the <code class="docutils literal notranslate"><span class="pre">div</span></code> element and have the class <code class="docutils literal notranslate"><span class="pre">price</span></code>. Since only one element can be the next sibling, this selector will return at most one element.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">AttributeSelector</span>
<span class="kn">from</span> <span class="nn">soupsavvy.selectors.relative</span> <span class="kn">import</span> <span class="n">RelativeNextSibling</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;title&quot;&gt;Animal Farm&lt;/p&gt;</span>
<span class="sd">        &lt;div class=&quot;section&quot;&gt;Book 1&lt;/div&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;discount&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $10&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">relative</span> <span class="o">=</span> <span class="n">RelativeNextSibling</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
<span class="n">relative</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">div</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="recursivity">
<h3>Recursivity<a class="headerlink" href="#recursivity" title="Link to this heading"></a></h3>
<p>Another powerful use of relative selectors in <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> is their ability to “lock” the recursive behavior of other selectors. For example, when used within a <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code>, <code class="docutils literal notranslate"><span class="pre">RelativeChild</span></code> ensures that matching elements are only found among the direct children of the searched element, regardless of the <code class="docutils literal notranslate"><span class="pre">recursive</span></code> parameter’s setting. This allows for more precise control over the scope of element selection in complex queries.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">Anchor</span><span class="p">,</span> <span class="n">AttributeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;title&quot;&gt;Animal Farm&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;discount&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;div&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $40&lt;/p&gt;</span>
<span class="sd">            &lt;a href=&quot;/shop&quot;&gt;Buy Now&lt;/a&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">price_selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">shop_selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;/shop&quot;</span><span class="p">)</span>
<span class="n">and_selector</span> <span class="o">=</span> <span class="p">(</span><span class="n">Anchor</span> <span class="o">&gt;</span> <span class="n">price_selector</span><span class="p">)</span> <span class="o">|</span> <span class="n">shop_selector</span>
<span class="n">and_selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;, &lt;a href=&quot;/shop&quot;&gt;Buy Now&lt;/a&gt;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="hasselector">
<h3>HasSelector<a class="headerlink" href="#hasselector" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code> in <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> corresponds to the CSS <code class="docutils literal notranslate"><span class="pre">:has()</span></code> pseudo-class. As explained by <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:has">Mozilla</a>, this pseudo-class represents an element if any of the relative selectors passed as an argument match at least one element when anchored against this element.</p>
<section id="id20">
<h4>CSS vs soupsavvy<a class="headerlink" href="#id20" title="Link to this heading"></a></h4>
<p>In CSS, the <code class="docutils literal notranslate"><span class="pre">:has()</span></code> pseudo-class allows for matching an element based on the presence of its child or another relative element. For example:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="nd">has</span><span class="o">(&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">price</span><span class="o">)</span>
</pre></div>
</div>
<p>This CSS selector matches any element that has a direct child with the class <code class="docutils literal notranslate"><span class="pre">price</span></code>. Here, the element matched by the <code class="docutils literal notranslate"><span class="pre">:has()</span></code> pseudo-class is the one that contains the <code class="docutils literal notranslate"><span class="pre">.price</span></code> element as a direct child.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, the <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code> provides similar functionality. It accepts one or more selectors as arguments and returns elements if any of the relative selectors match at least one element when anchored against the current element.</p>
</section>
<section id="default-recursive-search">
<h4>Default Recursive Search<a class="headerlink" href="#default-recursive-search" title="Link to this heading"></a></h4>
<p>When you use the <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code> without specifying a combinator, it defaults to the descendant combinator. This means that any selector passed to <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code> that is not a <code class="docutils literal notranslate"><span class="pre">Relative</span> <span class="pre">Selector</span></code> or is <code class="docutils literal notranslate"><span class="pre">RelativeDescendant</span></code> will use the <code class="docutils literal notranslate"><span class="pre">recursive</span></code> search logic. In practical terms, this will search through all descendants of the anchor element to find matches. For instance, if a <code class="docutils literal notranslate"><span class="pre">&lt;body&gt;</span></code> element matches the selector, its parent <code class="docutils literal notranslate"><span class="pre">&lt;html&gt;</span></code> element will also be selected.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">HasSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Brave New World&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">    &lt;/div&gt;</span>
<span class="sd">    &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">        &lt;span&gt;</span>
<span class="sd">            &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">                &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">            &lt;/span&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">    &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">HasSelector</span><span class="p">(</span><span class="n">discount_selector</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;book&quot;&gt;
 &lt;span class=&quot;title&quot;&gt;
  Animal Farm
 &lt;/span&gt;
 &lt;span&gt;
  &lt;span class=&quot;discount&quot;&gt;
   &lt;p class=&quot;price&quot;&gt;
    Price: $15
   &lt;/p&gt;
  &lt;/span&gt;
 &lt;/span&gt;
 &lt;p class=&quot;price&quot;&gt;
  Price: $20
 &lt;/p&gt;
&lt;/div&gt;

&lt;span&gt;
 &lt;span class=&quot;discount&quot;&gt;
  &lt;p class=&quot;price&quot;&gt;
   Price: $15
  &lt;/p&gt;
 &lt;/span&gt;
&lt;/span&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="id21">
<h4>Multiple Selectors<a class="headerlink" href="#id21" title="Link to this heading"></a></h4>
<p>When multiple selectors are used with <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code>, it will return elements that match <strong>any</strong> of the provided selectors.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">HasSelector</span><span class="p">,</span> <span class="n">PatternSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Brave New World&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">    &lt;/div&gt;</span>
<span class="sd">    &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;discount&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">    &lt;/div&gt;</span>
<span class="sd">    &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">        &lt;span&gt;Bestseller&lt;/span&gt;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Frankenstein&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">    &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">discount_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;discount&quot;</span><span class="p">)</span>
<span class="n">bestseller_selector</span> <span class="o">=</span> <span class="n">PatternSelector</span><span class="p">(</span><span class="s2">&quot;Bestseller&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">HasSelector</span><span class="p">(</span><span class="n">discount_selector</span><span class="p">,</span> <span class="n">bestseller_selector</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;book&quot;&gt;
 &lt;span class=&quot;title&quot;&gt;
  Animal Farm
 &lt;/span&gt;
 &lt;span class=&quot;discount&quot;&gt;
  &lt;p class=&quot;price&quot;&gt;
   Price: $15
  &lt;/p&gt;
 &lt;/span&gt;
 &lt;p class=&quot;price&quot;&gt;
  Price: $20
 &lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;book&quot;&gt;
 &lt;span&gt;
  Bestseller
 &lt;/span&gt;
 &lt;span class=&quot;title&quot;&gt;
  Frankenstein
 &lt;/span&gt;
 &lt;p class=&quot;price&quot;&gt;
  Price: $30
 &lt;/p&gt;
&lt;/div&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="id22">
<h4>Relative Selectors<a class="headerlink" href="#id22" title="Link to this heading"></a></h4>
<p>By using relative selectors, you can define specific relationships other than descendants between the anchor and relative elements. For instance, you can search for elements that have a specific next sibling, rather than just a descendant.</p>
<p>To find elements that have a direct next sibling with the class <code class="docutils literal notranslate"><span class="pre">price</span></code>, you would use <code class="docutils literal notranslate"><span class="pre">RelativeNextSibling</span></code> within <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">Anchor</span><span class="p">,</span> <span class="n">AttributeSelector</span><span class="p">,</span> <span class="n">HasSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p class=&quot;title&quot;&gt;Animal Farm&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;discount&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">        &lt;div class=&quot;section&quot;&gt;Book 1&lt;/div&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">has_selector</span> <span class="o">=</span> <span class="n">HasSelector</span><span class="p">(</span><span class="n">Anchor</span> <span class="o">+</span> <span class="n">selector</span><span class="p">)</span>
<span class="n">has_selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;section&quot;&gt;Book 1&lt;/div&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="compound-selectors">
<h4>Compound Selectors<a class="headerlink" href="#compound-selectors" title="Link to this heading"></a></h4>
<p>You can mimic CSS compound selectors with the <code class="docutils literal notranslate"><span class="pre">:has()</span></code> pseudo-class by combining <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code> with <code class="docutils literal notranslate"><span class="pre">AndSelector</span></code>. For example:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">div</span><span class="p">:</span><span class="nd">has</span><span class="o">(&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">price</span><span class="o">)</span>
</pre></div>
</div>
<p>The above CSS would match any <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> element that has a direct child with the class <code class="docutils literal notranslate"><span class="pre">price</span></code>.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, this can be achieved by combining <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code> with <code class="docutils literal notranslate"><span class="pre">RelativeChild</span></code> and <code class="docutils literal notranslate"><span class="pre">AndSelector</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">Anchor</span><span class="p">,</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">HasSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;div&gt;&lt;p class=&quot;discount&quot;&gt;Price: $20&lt;/p&gt;&lt;/div&gt;</span>
<span class="sd">        &lt;span&gt;&lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;&lt;/div&gt;</span>
<span class="sd">        &lt;div&gt;&lt;p class=&quot;price&quot;&gt;Price: $40&lt;/p&gt;&lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">relative</span> <span class="o">=</span> <span class="n">Anchor</span> <span class="o">&gt;</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">has_selector</span> <span class="o">=</span> <span class="n">HasSelector</span><span class="p">(</span><span class="n">relative</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span>
<span class="n">has_selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;div&gt;&lt;p class=&quot;price&quot;&gt;Price: $40&lt;/p&gt;&lt;/div&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="mixed-relative-selectors">
<h4>Mixed Relative Selectors<a class="headerlink" href="#mixed-relative-selectors" title="Link to this heading"></a></h4>
<p>You can also mix different relative selectors within <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code>. For example, to find elements that have a next sibling with text content <code class="docutils literal notranslate"><span class="pre">Read</span> <span class="pre">more</span></code> or child with class <code class="docutils literal notranslate"><span class="pre">price</span></code>, you would use:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">Anchor</span><span class="p">,</span> <span class="n">AttributeSelector</span><span class="p">,</span> <span class="n">HasSelector</span><span class="p">,</span> <span class="n">PatternSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;div class=&quot;newspaper&quot;&gt;</span>
<span class="sd">            &lt;p class=&quot;title&quot;&gt;New York Times&lt;/p&gt;</span>
<span class="sd">            &lt;h1&gt;Only 5$!&lt;/h1&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">        &lt;p&gt;Read more&lt;/p&gt;</span>
<span class="sd">        &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">            &lt;span&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">            &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">relative_newspaper</span> <span class="o">=</span> <span class="n">Anchor</span> <span class="o">+</span> <span class="n">PatternSelector</span><span class="p">(</span><span class="s2">&quot;Read more&quot;</span><span class="p">)</span>
<span class="n">relative_book</span> <span class="o">=</span> <span class="n">Anchor</span> <span class="o">&gt;</span> <span class="n">AttributeSelector</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">has_selector</span> <span class="o">=</span> <span class="n">HasSelector</span><span class="p">(</span><span class="n">relative_newspaper</span><span class="p">,</span> <span class="n">relative_book</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">has_selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;newspaper&quot;&gt;
 &lt;p class=&quot;title&quot;&gt;
  New York Times
 &lt;/p&gt;
 &lt;h1&gt;
  Only 5$!
 &lt;/h1&gt;
&lt;/div&gt;

&lt;div class=&quot;book&quot;&gt;
 &lt;span&gt;
  Animal Farm
 &lt;/span&gt;
 &lt;p class=&quot;price&quot;&gt;
  Price: $30
 &lt;/p&gt;
&lt;/div&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="relativesubsequentsibling">
<h4>RelativeSubsequentSibling<a class="headerlink" href="#relativesubsequentsibling" title="Link to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">RelativeSubsequentSibling</span></code> within <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code> can be used to find elements that are siblings preceding a specific <strong>relative element</strong>. For example, to find all siblings preceding the element with text content <code class="docutils literal notranslate"><span class="pre">Stop</span></code> you would use:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">Anchor</span><span class="p">,</span> <span class="n">HasSelector</span><span class="p">,</span> <span class="n">PatternSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;div class=&quot;countdown&quot;&gt;4&lt;/div&gt;</span>
<span class="sd">        &lt;span&gt;3&lt;/span&gt;</span>
<span class="sd">        &lt;p id=&quot;fgai23&quot;&gt;2&lt;/p&gt;</span>
<span class="sd">        &lt;a href=&quot;https://example.com&quot;&gt;1&lt;/a&gt;</span>
<span class="sd">        &lt;span&gt;Stop&lt;/span&gt;</span>
<span class="sd">        &lt;p&gt;Go&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">relative_countdown</span> <span class="o">=</span> <span class="n">Anchor</span> <span class="o">*</span> <span class="n">PatternSelector</span><span class="p">(</span><span class="s2">&quot;Stop&quot;</span><span class="p">)</span>
<span class="n">has_selector</span> <span class="o">=</span> <span class="n">HasSelector</span><span class="p">(</span><span class="n">relative_countdown</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">has_selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;countdown&quot;&gt;
 4
&lt;/div&gt;

&lt;span&gt;
 3
&lt;/span&gt;

&lt;p id=&quot;fgai23&quot;&gt;
 2
&lt;/p&gt;

&lt;a href=&quot;https://example.com&quot;&gt;
 1
&lt;/a&gt;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="relative-ancestors">
<h3>Relative Ancestors<a class="headerlink" href="#relative-ancestors" title="Link to this heading"></a></h3>
<section id="relativeancestor">
<h4>RelativeAncestor<a class="headerlink" href="#relativeancestor" title="Link to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">RelativeAncestor</span></code> selector allows you to search <em>up the tree</em> to find a specific ancestor element. This selector matches any element that is an ancestor of the searched element, known as the anchor element. For example, you can use <code class="docutils literal notranslate"><span class="pre">RelativeAncestor</span></code> to find an ancestor <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> element of a given element.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">Anchor</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;div&gt;</span>
<span class="sd">            &lt;span&gt;</span>
<span class="sd">                &lt;span class=&quot;info&quot;&gt;Important!&lt;/span&gt;</span>
<span class="sd">                &lt;span&gt;Actual Information&lt;/span&gt;</span>
<span class="sd">            &lt;/span&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">anchor</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">})</span>

<span class="n">div_ancestor</span> <span class="o">=</span> <span class="n">Anchor</span> <span class="o">&lt;&lt;</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">div_ancestor</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">anchor</span><span class="p">)</span><span class="o">.</span><span class="n">prettify</span><span class="p">())</span>  <span class="c1"># type: ignore</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;div&gt;
 &lt;span&gt;
  &lt;span class=&quot;info&quot;&gt;
   Important!
  &lt;/span&gt;
  &lt;span&gt;
   Actual Information
  &lt;/span&gt;
 &lt;/span&gt;
&lt;/div&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="relativeparent">
<h4>RelativeParent<a class="headerlink" href="#relativeparent" title="Link to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">RelativeParent</span></code> selector operates similarly to <code class="docutils literal notranslate"><span class="pre">RelativeAncestor</span></code>, but it is more specific, matching only the direct parent of the searched element. The example demonstrates how to find the direct parent of type <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code>. The <code class="docutils literal notranslate"><span class="pre">find_all</span></code> method of this selector will return at most one element since an element can only have one direct parent.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">Anchor</span><span class="p">,</span> <span class="n">TypeSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;div&gt;</span>
<span class="sd">            &lt;div&gt;</span>
<span class="sd">                &lt;span class=&quot;info&quot;&gt;Important!&lt;/span&gt;</span>
<span class="sd">                &lt;span&gt;Actual Information&lt;/span&gt;</span>
<span class="sd">            &lt;/div&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">anchor</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">})</span>

<span class="n">div_ancestor</span> <span class="o">=</span> <span class="n">Anchor</span> <span class="o">&lt;</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">div_ancestor</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">anchor</span><span class="p">)))</span>  <span class="c1"># type: ignore</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;div&gt;
 &lt;span class=&quot;info&quot;&gt;
  Important!
 &lt;/span&gt;
 &lt;span&gt;
  Actual Information
 &lt;/span&gt;
&lt;/div&gt;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="ancestors-with-hasselector">
<h3>Ancestors with HasSelector<a class="headerlink" href="#ancestors-with-hasselector" title="Link to this heading"></a></h3>
<p>Combining <code class="docutils literal notranslate"><span class="pre">RelativeAncestor</span></code> and <code class="docutils literal notranslate"><span class="pre">RelativeParent</span></code> selectors with <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code> allows you to find elements that have a specific ancestor or parent. For instance, you can locate all elements that have an ancestor with class <code class="docutils literal notranslate"><span class="pre">breaking</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">Anchor</span><span class="p">,</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">HasSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;div class=&quot;breaking&quot;&gt;</span>
<span class="sd">            &lt;span&gt;</span>
<span class="sd">                &lt;span class=&quot;info&quot;&gt;Important!&lt;/span&gt;</span>
<span class="sd">                &lt;span&gt;Actual Information&lt;/span&gt;</span>
<span class="sd">            &lt;/span&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">span</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">)</span>

<span class="n">div_ancestor</span> <span class="o">=</span> <span class="n">HasSelector</span><span class="p">(</span><span class="n">Anchor</span> <span class="o">&lt;&lt;</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;breaking&quot;</span><span class="p">))</span>
<span class="n">div_ancestor</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">span</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;span class=&quot;info&quot;&gt;Important!&lt;/span&gt;, &lt;span&gt;Actual Information&lt;/span&gt;]
</pre></div>
</div>
</div>
</div>
<p>This operation is somewhat analogous to using a <code class="docutils literal notranslate"><span class="pre">DescendantCombinator(selector,</span> <span class="pre">UniversalSelector())</span></code>, but with a key distinction: it only returns ancestors matching the <em>selector</em> if they are indeed descendants of the searched element.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">UniversalSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;div class=&quot;breaking&quot;&gt;</span>
<span class="sd">            &lt;span&gt;</span>
<span class="sd">                &lt;span class=&quot;info&quot;&gt;Important!&lt;/span&gt;</span>
<span class="sd">                &lt;span&gt;Actual Information&lt;/span&gt;</span>
<span class="sd">            &lt;/span&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">span</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">)</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;breaking&quot;</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">UniversalSelector</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;When searching &lt;span&gt;: &quot;</span><span class="p">,</span> <span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">span</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;When searching &lt;html&gt;: </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>When searching &lt;span&gt;:  []
When searching &lt;html&gt;: 
 &lt;span&gt;
 &lt;span class=&quot;info&quot;&gt;
  Important!
 &lt;/span&gt;
 &lt;span&gt;
  Actual Information
 &lt;/span&gt;
&lt;/span&gt;

&lt;span class=&quot;info&quot;&gt;
 Important!
&lt;/span&gt;

&lt;span&gt;
 Actual Information
&lt;/span&gt;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="nth-selectors">
<h2>Nth Selectors<a class="headerlink" href="#nth-selectors" title="Link to this heading"></a></h2>
<p>CSS provides several pseudo-classes such as <code class="docutils literal notranslate"><span class="pre">nth-child</span></code>, <code class="docutils literal notranslate"><span class="pre">nth-of-type</span></code>, and others, which allow you to select elements based on their position within a list of siblings. However, these CSS selectors are limited to selecting elements based on their ordinal position among all siblings. <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> extends this functionality with a set of <code class="docutils literal notranslate"><span class="pre">Nth</span></code> selectors that allow you to select the nth element that matches a given selector, rather than just the nth child.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">soupsavvy.selectors.nth</span></code> module introduces three components:</p>
<ul class="simple">
<li><p><strong>NthOfSelector</strong></p></li>
<li><p><strong>NthLastOfSelector</strong></p></li>
<li><p><strong>OnlyOfSelector</strong></p></li>
</ul>
<p>Which allow you to perform more advanced selections based on the position of elements that match specific criteria.</p>
<section id="id23">
<h3>CSS vs soupsavvy<a class="headerlink" href="#id23" title="Link to this heading"></a></h3>
<p>For instance, if you want to select every 2nd element with a class <code class="docutils literal notranslate"><span class="pre">price</span></code>, this would be impossible in pure CSS, because:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">price</span><span class="p">:</span><span class="nd">nth-child</span><span class="o">(</span><span class="nt">2n</span><span class="o">)</span>
</pre></div>
</div>
<p>would select every element that is the 2nd child <strong>and</strong> has the class <code class="docutils literal notranslate"><span class="pre">price</span></code>, not every 3rd element with the class <code class="docutils literal notranslate"><span class="pre">price</span></code>!</p>
<p>In <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code>, this can be achieved with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">NthOfSelector</span><span class="p">(</span><span class="n">ClassSelector</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">),</span> <span class="n">nth</span><span class="o">=</span><span class="s2">&quot;3n&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This selector would correctly select every 3rd element that matches the <code class="docutils literal notranslate"><span class="pre">price</span></code> class.</p>
</section>
<section id="nthofselector">
<h3>NthOfSelector<a class="headerlink" href="#nthofselector" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">NthOfSelector</span></code> allows you to select elements that match a specified pattern of occurrence, based on the <code class="docutils literal notranslate"><span class="pre">nth</span></code> rule. Provided <code class="docutils literal notranslate"><span class="pre">nth</span></code> needs to be valid CSS nth rule <code class="docutils literal notranslate"><span class="pre">(&lt;An+B&gt;</span> <span class="pre">|</span> <span class="pre">even</span> <span class="pre">|</span> <span class="pre">odd)</span></code>. For example, to select every 2nd element with a class <code class="docutils literal notranslate"><span class="pre">price</span></code>, you would use:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span>
<span class="kn">from</span> <span class="nn">soupsavvy.selectors.nth</span> <span class="kn">import</span> <span class="n">NthOfSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price discount&quot;&gt;Price: €1&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $2&lt;/p&gt;</span>
<span class="sd">        &lt;span&gt;Bestseller&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: €3&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: €4&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: €5&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">NthOfSelector</span><span class="p">(</span><span class="n">price_selector</span><span class="p">,</span> <span class="n">nth</span><span class="o">=</span><span class="s2">&quot;2n&quot;</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;p class=&quot;price&quot;&gt;Price: $2&lt;/p&gt;, &lt;p class=&quot;price&quot;&gt;Price: €4&lt;/p&gt;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="nthlastofselector">
<h3>NthLastOfSelector<a class="headerlink" href="#nthlastofselector" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">NthLastOfSelector</span></code> works similarly to <code class="docutils literal notranslate"><span class="pre">NthOfSelector</span></code> but counts elements from the end of the list. It selects the nth element matching the provided selector, starting from the last element and moving backward.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">PatternSelector</span>
<span class="kn">from</span> <span class="nn">soupsavvy.selectors.nth</span> <span class="kn">import</span> <span class="n">NthLastOfSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price discount&quot;&gt;Price: €1&lt;/p&gt;</span>
<span class="sd">        &lt;p&gt;Price: $2&lt;/p&gt;</span>
<span class="sd">        &lt;span&gt;Bestseller&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: €3&lt;/p&gt;</span>
<span class="sd">        &lt;p&gt;Price: €4&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: €5&lt;/p&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">price_selector</span> <span class="o">=</span> <span class="n">PatternSelector</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;^price&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">))</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">NthLastOfSelector</span><span class="p">(</span><span class="n">price_selector</span><span class="p">,</span> <span class="n">nth</span><span class="o">=</span><span class="s2">&quot;odd&quot;</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;p class=&quot;price discount&quot;&gt;Price: €1&lt;/p&gt;,
 &lt;p class=&quot;price&quot;&gt;Price: €3&lt;/p&gt;,
 &lt;p class=&quot;price&quot;&gt;Price: €5&lt;/p&gt;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="onlyofselector">
<h3>OnlyOfSelector<a class="headerlink" href="#onlyofselector" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">OnlyOfSelector</span></code> is used to select an element if it is the <strong>only</strong> element that matches the provided selector among its siblings. If more than one element matches the selector, none will be selected.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">HasSelector</span>
<span class="kn">from</span> <span class="nn">soupsavvy.selectors.nth</span> <span class="kn">import</span> <span class="n">OnlyOfSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $15&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">    &lt;/div&gt;</span>
<span class="sd">    &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Frankenstein&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">    &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">OnlyOfSelector</span><span class="p">(</span><span class="n">price_selector</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="combining">
<h3>Combining<a class="headerlink" href="#combining" title="Link to this heading"></a></h3>
<p>Here’s an example demonstrating how to select an element with the class <code class="docutils literal notranslate"><span class="pre">title</span></code> that is a direct child of an element containing only one child with the class <code class="docutils literal notranslate"><span class="pre">price</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">Anchor</span><span class="p">,</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">HasSelector</span>
<span class="kn">from</span> <span class="nn">soupsavvy.selectors.nth</span> <span class="kn">import</span> <span class="n">OnlyOfSelector</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Brave New world&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $25&lt;/p&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $20&lt;/p&gt;</span>
<span class="sd">    &lt;/div&gt;</span>
<span class="sd">    &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Animal Farm&lt;/span&gt;</span>
<span class="sd">    &lt;/div&gt;</span>
<span class="sd">    &lt;div class=&quot;book&quot;&gt;</span>
<span class="sd">        &lt;span class=&quot;title&quot;&gt;Frankenstein&lt;/span&gt;</span>
<span class="sd">        &lt;p class=&quot;price&quot;&gt;Price: $30&lt;/p&gt;</span>
<span class="sd">    &lt;/div&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">price_selector</span> <span class="o">=</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">HasSelector</span><span class="p">(</span><span class="n">Anchor</span> <span class="o">&gt;</span> <span class="n">OnlyOfSelector</span><span class="p">(</span><span class="n">price_selector</span><span class="p">))</span> <span class="o">&gt;</span> <span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;span class=&quot;title&quot;&gt;Frankenstein&lt;/span&gt;]
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="operators-module">
<h2>Operators module<a class="headerlink" href="#operators-module" title="Link to this heading"></a></h2>
<p>As an alternative way of combining selectors, <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> offers a set of convenient operator functions within the <code class="docutils literal notranslate"><span class="pre">soupsavvy.operators</span></code> module, which acts as shortcuts:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">and_</span></code> - for creating <code class="docutils literal notranslate"><span class="pre">AndSelector</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">or_</span></code> - for creating <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_</span></code> - for creating <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">where</span></code> - for creating <code class="docutils literal notranslate"><span class="pre">SelectorList</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">not_</span></code> - for creating <code class="docutils literal notranslate"><span class="pre">NotSelector</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">has</span></code> - for creating <code class="docutils literal notranslate"><span class="pre">HasSelector</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xor</span></code> - for creating <code class="docutils literal notranslate"><span class="pre">XORSelector</span></code></p></li>
</ul>
<p>These functions could in some contexts be more clear and concise.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>
<span class="kn">from</span> <span class="nn">soupsavvy.api</span> <span class="kn">import</span> <span class="n">and_</span>

<span class="n">and_</span><span class="p">(</span><span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">),</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>AndSelector(ClassSelector(name=&#39;class&#39;, value=&#39;price&#39;), TypeSelector(name=&#39;p&#39;))
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">soupsavvy</span> <span class="kn">import</span> <span class="n">ClassSelector</span><span class="p">,</span> <span class="n">TypeSelector</span>
<span class="kn">from</span> <span class="nn">soupsavvy.api</span> <span class="kn">import</span> <span class="n">has</span>

<span class="n">has</span><span class="p">(</span><span class="n">ClassSelector</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">),</span> <span class="n">TypeSelector</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>HasSelector(ClassSelector(name=&#39;class&#39;, value=&#39;price&#39;), TypeSelector(name=&#39;p&#39;))
</pre></div>
</div>
</div>
</div>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> provides a wide range of Higher Order Selectors that allow you to combine multiple selectors in various ways to create complex search criteria. Selectors were designed to be highly flexible and combinable, so that they can be customized to user specific needs without much trouble. Hopefully, this will help you to kick the ground running with this topic.</p>
<p><strong>Enjoy <code class="docutils literal notranslate"><span class="pre">soupsavvy</span></code> and leave us feedback!</strong><br />
<strong>Happy scraping!</strong></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="selectors.html" class="btn btn-neutral float-left" title="Selectors" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="css.html" class="btn btn-neutral float-right" title="CSS Selectors" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, sewcio543.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>